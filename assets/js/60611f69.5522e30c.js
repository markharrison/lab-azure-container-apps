"use strict";(self.webpackChunklab_container_apps=self.webpackChunklab_container_apps||[]).push([[525],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return d}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):p(p({},t),e)),n},s=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},b=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),b=c(n),d=a,m=b["".concat(l,".").concat(d)]||b[d]||u[d]||i;return n?r.createElement(m,p(p({ref:t},s),{},{components:n})):r.createElement(m,p({ref:t},s))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,p=new Array(i);p[0]=b;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:a,p[1]=o;for(var c=2;c<i;c++)p[c]=n[c];return r.createElement.apply(null,p)}return r.createElement.apply(null,n)}b.displayName="MDXCreateElement"},5494:function(e,t,n){n.r(t),n.d(t,{assets:function(){return s},contentTitle:function(){return l},default:function(){return d},frontMatter:function(){return o},metadata:function(){return c},toc:function(){return u}});var r=n(7462),a=n(3366),i=(n(7294),n(3905)),p=["components"],o={sidebar_label:"Deploy WebApp",slug:"/deploy-webapp"},l="Deploy WebApp",c={unversionedId:"deploy-webapp",id:"deploy-webapp",title:"Deploy WebApp",description:"Objective",source:"@site/docs/03-deploy-webapp.md",sourceDirName:".",slug:"/deploy-webapp",permalink:"/lab-azure-container-apps/deploy-webapp",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_label:"Deploy WebApp",slug:"/deploy-webapp"},sidebar:"tutorialSidebar",previous:{title:"Create CApps Environment",permalink:"/lab-azure-container-apps/create-container-apps-environment"},next:{title:"Deploy APIApp",permalink:"/lab-azure-container-apps/deploy-apiapp"}},s={},u=[{value:"Objective",id:"objective",level:2},{value:"Lab Script",id:"lab-script",level:2},{value:"Create Container App",id:"create-container-app",level:3},{value:"Auto Scale Up / Down",id:"auto-scale-up--down",level:3},{value:"Explore Azure Portal",id:"explore-azure-portal",level:3},{value:"Summary",id:"summary",level:2}],b={toc:u};function d(e){var t=e.components,o=(0,a.Z)(e,p);return(0,i.kt)("wrapper",(0,r.Z)({},b,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"deploy-webapp"},"Deploy WebApp"),(0,i.kt)("h2",{id:"objective"},"Objective"),(0,i.kt)("p",null,"In this section we will create a Container App which will be the WebApp front-end.   "),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(9349).Z,width:"2667",height:"1500"})),(0,i.kt)("h2",{id:"lab-script"},"Lab Script"),(0,i.kt)("h3",{id:"create-container-app"},"Create Container App"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Create the Container App for the WebApp front-end ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Container image is pulled from the GitHub container registry"),(0,i.kt)("li",{parentName:"ul"},"Specify that it can be externally accessed"),(0,i.kt)("li",{parentName:"ul"},"Specify that it can scale from 0 to 3 container instances (replicas) ")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"az containerapp create -g $RG -o table \\\n  --image ghcr.io/markharrison/coloursweb:latest \\\n  --name coloursweb \\\n  --environment $CAENV \\\n  --ingress external --target-port 80 \\\n  --min-replicas 0   --max-replicas 3 \\\n  --revision-suffix webv1 \n")),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(9033).Z,width:"1920",height:"648"})," "),(0,i.kt)("p",null,"Note the name of the URL that is emitted - in the above example it is:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"https://coloursweb.jollymushroom-52b07fac.northeurope.azurecontainerapps.io/")),(0,i.kt)("h3",{id:"auto-scale-up--down"},"Auto Scale Up / Down"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Check how many replicas (container instances) are running")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"az containerapp replica list  -g $RG -o table \\\n  --name coloursweb \\\n  --revision coloursweb--webv1\n")),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(2816).Z,width:"1920",height:"369"})),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Wait for 5 minutes - after no activity, it should scale down to zero replicas")),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(3616).Z,width:"1920",height:"369"})),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Access the web site - in a web browser go to the URL that was emitted when the container app was created ")),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(2321).Z,width:"1920",height:"1193"})),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Accessing the site will cause one replica to be spun up to service the request.")),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(1271).Z,width:"1920",height:"369"})),(0,i.kt)("h3",{id:"explore-azure-portal"},"Explore Azure Portal"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"In the Azure portal we can see the Container App.  Explore the various menu options.")),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(5769).Z,width:"1920",height:"1884"})),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(1149).Z,width:"1920",height:"1884"})),(0,i.kt)("h2",{id:"summary"},"Summary"),(0,i.kt)("p",null,"In this section we created our first application - the Web front-end. "),(0,i.kt)("p",null,"The number of replicas automatically scaled as needed and went down to zero when not used.   No usage charges apply when an application is scaled to zero."))}d.isMDXComponent=!0},2321:function(e,t,n){t.Z=n.p+"assets/images/ScrnAccessWeb1-2d8d9e3b6d8f2cdcd85e82e8753d3048.png"},5769:function(e,t,n){t.Z=n.p+"assets/images/ScrnAzurePortalCAppWeb1-3d0ae205f052de96182fb45798b747be.png"},1149:function(e,t,n){t.Z=n.p+"assets/images/ScrnAzurePortalCAppWeb2-26b56f0a1005bfa77548ad44a67e40c1.png"},9033:function(e,t,n){t.Z=n.p+"assets/images/ScrnCreateWebv1-5954ce6b5cfda585e68d31c65c169d44.png"},2816:function(e,t,n){t.Z=n.p+"assets/images/ScrnReplicaWeb1-cc5c4a0c65102a311226518a7fb18c37.png"},3616:function(e,t,n){t.Z=n.p+"assets/images/ScrnReplicaWeb2-91b79ebe3c77b58c55c4e9fbe5006ccf.png"},1271:function(e,t,n){t.Z=n.p+"assets/images/ScrnReplicaWeb3-428350aa4db6a2361a0a73899de8ec9b.png"},9349:function(e,t,n){t.Z=n.p+"assets/images/Slide2-48ea5b24050393c38d88b98817e5263a.png"}}]);