"use strict";(self.webpackChunklab_container_apps=self.webpackChunklab_container_apps||[]).push([[128],{6683:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>c,toc:()=>p});var t=i(4848),s=i(8453);const r={sidebar_label:"Deploy WebApp",slug:"/deploy-webapp"},a="Deploy WebApp",c={id:"deploy-webapp",title:"Deploy WebApp",description:"Objective",source:"@site/docs/03-deploy-webapp.md",sourceDirName:".",slug:"/deploy-webapp",permalink:"/lab-azure-container-apps/deploy-webapp",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_label:"Deploy WebApp",slug:"/deploy-webapp"},sidebar:"tutorialSidebar",previous:{title:"Create CApps Environment",permalink:"/lab-azure-container-apps/create-container-apps-environment"},next:{title:"Deploy APIApp",permalink:"/lab-azure-container-apps/deploy-apiapp"}},l={},p=[{value:"Objective",id:"objective",level:2},{value:"Lab Script",id:"lab-script",level:2},{value:"Create Container App",id:"create-container-app",level:3},{value:"Auto Scale Up / Down",id:"auto-scale-up--down",level:3},{value:"Explore Azure Portal",id:"explore-azure-portal",level:3},{value:"Summary",id:"summary",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"deploy-webapp",children:"Deploy WebApp"}),"\n",(0,t.jsx)(n.h2,{id:"objective",children:"Objective"}),"\n",(0,t.jsx)(n.p,{children:"In this section we will create a Container App which will be the WebApp front-end."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:i(5406).A+"",width:"2667",height:"1500"})}),"\n",(0,t.jsx)(n.h2,{id:"lab-script",children:"Lab Script"}),"\n",(0,t.jsx)(n.h3,{id:"create-container-app",children:"Create Container App"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Create the Container App for the WebApp front-end","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Container image is pulled from the GitHub container registry"}),"\n",(0,t.jsx)(n.li,{children:"Specify that it can be externally accessed"}),"\n",(0,t.jsx)(n.li,{children:"Specify that it can scale from 0 to 3 container instances (replicas)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"az containerapp create -g $RG -o table \\\n  --image ghcr.io/markharrison/coloursweb:latest \\\n  --name coloursweb \\\n  --environment $CAENV \\\n  --ingress external --target-port 80 \\\n  --min-replicas 0   --max-replicas 3 \\\n  --revision-suffix webv1 \n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:i(8710).A+"",width:"1920",height:"648"})}),"\n",(0,t.jsx)(n.p,{children:"Note the name of the URL that is emitted - in the above example it is:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"https://coloursweb.jollymushroom-52b07fac.northeurope.azurecontainerapps.io/"})}),"\n",(0,t.jsx)(n.h3,{id:"auto-scale-up--down",children:"Auto Scale Up / Down"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Check how many replicas (container instances) are running"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"az containerapp replica list  -g $RG -o table \\\n  --name coloursweb \\\n  --revision coloursweb--webv1\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:i(8888).A+"",width:"1920",height:"369"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Wait for 5 minutes - after no activity, it should scale down to zero replicas"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:i(3379).A+"",width:"1920",height:"369"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Access the web site - in a web browser go to the URL that was emitted when the container app was created"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:i(5870).A+"",width:"1920",height:"1193"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Accessing the site will cause one replica to be spun up to service the request."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:i(4522).A+"",width:"1920",height:"369"})}),"\n",(0,t.jsx)(n.h3,{id:"explore-azure-portal",children:"Explore Azure Portal"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"In the Azure portal we can see the Container App.  Explore the various menu options."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:i(5639).A+"",width:"1920",height:"1884"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:i(2988).A+"",width:"1920",height:"1884"})}),"\n",(0,t.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(n.p,{children:"In this section we created our first application - the Web front-end."}),"\n",(0,t.jsx)(n.p,{children:"The number of replicas automatically scaled as needed and went down to zero when not used.   No usage charges apply when an application is scaled to zero."})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},5870:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/ScrnAccessWeb1-2d8d9e3b6d8f2cdcd85e82e8753d3048.png"},5639:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/ScrnAzurePortalCAppWeb1-3d0ae205f052de96182fb45798b747be.png"},2988:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/ScrnAzurePortalCAppWeb2-26b56f0a1005bfa77548ad44a67e40c1.png"},8710:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/ScrnCreateWebv1-5954ce6b5cfda585e68d31c65c169d44.png"},8888:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/ScrnReplicaWeb1-cc5c4a0c65102a311226518a7fb18c37.png"},3379:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/ScrnReplicaWeb2-91b79ebe3c77b58c55c4e9fbe5006ccf.png"},4522:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/ScrnReplicaWeb3-428350aa4db6a2361a0a73899de8ec9b.png"},5406:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/Slide2-48ea5b24050393c38d88b98817e5263a.png"},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>c});var t=i(6540);const s={},r=t.createContext(s);function a(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);